<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
<meta name="referrer" content="no-referrer" />
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-xm.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-xm.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"carpediemtal.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":"auto","trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="article">
<meta property="og:title" content="TOP">
<meta property="og:url" content="https://carpediemtal.github.io/2021/05/06/TOP/index.html">
<meta property="og:site_name" content="Ming">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://raw.githubusercontent.com/carpediemtal/image-bed/master/img/blog005VT09Qly1gq90gvu455j30ux0iv76e.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/carpediemtal/image-bed/master/img/blog005VT09Qly1gq9ntk5j6wj30ii0133ye.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/carpediemtal/image-bed/master/img/blog005VT09Qly1gq9oa6oalyj30ui0fb75r.jpg">
<meta property="article:published_time" content="2021-05-06T13:04:09.000Z">
<meta property="article:modified_time" content="2025-02-12T00:41:03.606Z">
<meta property="article:author" content="Ming">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/carpediemtal/image-bed/master/img/blog005VT09Qly1gq90gvu455j30ux0iv76e.jpg">

<link rel="canonical" href="https://carpediemtal.github.io/2021/05/06/TOP/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>TOP | Ming</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Ming</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>Commonweal 404</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://carpediemtal.github.io/2021/05/06/TOP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/arina.jpg">
      <meta itemprop="name" content="Ming">
      <meta itemprop="description" content="Come on, check me out!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ming">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          TOP
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-05-06 21:04:09" itemprop="dateCreated datePublished" datetime="2021-05-06T21:04:09+08:00">2021-05-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-02-12 08:41:03" itemprop="dateModified" datetime="2025-02-12T08:41:03+08:00">2025-02-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <img src="https://raw.githubusercontent.com/carpediemtal/image-bed/master/img/blog005VT09Qly1gq90gvu455j30ux0iv76e.jpg"/>

<span id="more"></span>

<h2 id="load-average"><a href="#load-average" class="headerlink" title="load average"></a>load average</h2><p>So what’s CPU load average?</p>
<p> Let’s explain CPU load first. CPU load is the number of processes which are being executed by CPU or waiting to be executed by CPU. So CPU load average is the average number of processes being or waiting executed over past 1, 5 and 15 minutes. (会有一个进程队列，等待CPU去调度执行，该队列中进程的数量即为CPU Load)</p>
<p>Below is an example to understand the relationship between load average and CPU cores:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">23:16:49 up  10:49,  5 user,  load average: 1.00, 0.40, 3.35</span><br></pre></td></tr></table></figure>


<p>On single core system this would mean:</p>
<ul>
<li>The CPU was fully (100%) utilized on average; 1 process was running on the CPU (1.00) over the last 1 minute.</li>
<li>The CPU was idle by 60% on average; no processes were waiting for CPU time (0.40) over the last 5 minutes.(过去五分钟的load avg为0.4，必定会有一些时刻进程队列为空，没有进程需要CPU时间，所以平均来说，CPU有60%是空闲的)</li>
<li>The CPU was overloaded by 235% on average; 2.35 processes were waiting for CPU time (3.35) over the last 15 minutes.</li>
</ul>
<p>On a dual-core system this would mean:</p>
<ul>
<li>The one CPU was 100% idle on average, one CPU was being used; no processes were waiting for CPU time(1.00) over the last 1 minute.</li>
<li>The CPUs were idle by 160% on average; no processes were waiting for CPU time. (0.40) over the last 5 minutes.</li>
<li>The CPUs were overloaded by 135% on average; 1.35 processes were waiting for CPU time. (3.35) over the last 15 minutes.</li>
</ul>
<p>PS: uptime也可以用来查看CPU load，而top查询的结果包含了uptime的结果。</p>
<img src="https://raw.githubusercontent.com/carpediemtal/image-bed/master/img/blog005VT09Qly1gq9ntk5j6wj30ii0133ye.jpg"/>

<p>可以用lscpu查看cpu的信息：</p>
<img src="https://raw.githubusercontent.com/carpediemtal/image-bed/master/img/blog005VT09Qly1gq9oa6oalyj30ui0fb75r.jpg"/>

<h2 id="TASK-and-CPU-States"><a href="#TASK-and-CPU-States" class="headerlink" title="TASK and CPU States"></a>TASK and CPU States</h2><p>shows total tasks or threads</p>
<p>us, user    : time running un-niced user processes<br>sy, system  : time running kernel processes<br>ni, nice    : time running niced user processes<br>id, idle    : time spent in the kernel idle handler<br>wa, IO-wait : time waiting for I&#x2F;O completion<br>hi : time spent servicing hardware interrupts<br>si : time spent servicing software interrupts<br>st : time stolen from this vm by the hypervisor</p>
<h2 id="hi"><a href="#hi" class="headerlink" title="hi"></a>hi</h2><p><code>hi</code> is the time spent processing hardware interrupts. Hardware interrupts are generated by hardware devices (network cards, keyboard controller, external timer, hardware sensors, …) when they need to signal something to the CPU (data has arrived, for example).</p>
<p>Since these can happen very frequently, and since they essentially block the current CPU while they are running, kernel hardware interrupt handlers are written to be as fast and simple as possible.</p>
<h2 id="si"><a href="#si" class="headerlink" title="si"></a>si</h2><p>根据我在计组课上学过的知识，CPU的速度与键盘、打印机这种低速设备的速度相差甚远，要处理硬件设备的请求，如果让CPU去轮询硬件设备，大部分时间都会花在等IO上，很耗费CPU时间，所以采用类似事件订阅的一种机制：当硬件准备好时，向CPU发送中断请求。</p>
<p>CPU设置了一组中断向量，比如从0到64，不同的中断向量对应着不同的处理代码（想想当初在8086上写汇编的日子，INT 60），当硬件设备有要处理的任务时，会向CPU发起一个中断请求。CPU接受到请求后，根据中断号，会跳转到对应的中断处理程序上，执行相应代码。</p>
<p>中断程序有个特点，它在执行的过程中不能再被中断（CPU在此期间会屏蔽中断请求）。在交互性很强的桌面系统里，响应时间甚至要比吞吐量来的更重要一些，假如某个中断程序的执行时间过长，就会影响到响应时间，所以中断处理的时间要尽量的短。</p>
<p>解决这个问题，linux将处理中断的routine一分为二：</p>
<p>a ‘top half’ which receives the hardware interrupt and a ‘bottom half’ which does the lengthy processing.</p>
<p>因为中断程序执行的时间很短，所以多核CPU同步的时候，可以用自旋锁（spinlock）。自旋锁采用忙等待的方式（时刻准备着），耗费CPU时间，但比一般的互斥锁效率更高。</p>
<h2 id="MEMORY-Usage"><a href="#MEMORY-Usage" class="headerlink" title="MEMORY Usage"></a>MEMORY Usage</h2><p>This portion consists of two lines which may express values in kibibytes (KiB) through exbibytes (EiB) depending on the scaling factor enforced with the &#96;E’ interactive command.</p>
<p> As a default, Line 1 reflects physical memory, classified as:  total, free, used and buff&#x2F;cache</p>
<p> Line 2 reflects mostly virtual memory, classified as: total, free, used and avail (which is physical memory)</p>
<p>The avail number on line 2 is an estimation of physical memory available for starting new applications, <strong>without swapping</strong>.</p>
<h2 id="CPU"><a href="#CPU" class="headerlink" title="%CPU"></a>%CPU</h2><p>What is CPU usage？</p>
<p>类似那种时分复用的思想，将CPU时间划分成多个时间片（时分复用帧），不同的线程占用不同的时间片。时间片是在可运行的任务之间轮转，阻塞在IO或者在等事件、等锁的任务是不可运行的，不参与轮转。</p>
<p>The task’s share of the elapsed CPU time since the last update, expressed as a percentage of total CPU time.</p>
<p>In a true SMP environment, if a process is multi-threaded and top is not operating in Threads mode, amounts greater than 100% may be reported. </p>
<h2 id="reference"><a href="#reference" class="headerlink" title="reference"></a>reference</h2><p>[What is CPU Load Average (tenable.com)](<a target="_blank" rel="noopener" href="https://community.tenable.com/s/article/What-is-CPU-Load-Average#:~:text=CPU">https://community.tenable.com/s/article/What-is-CPU-Load-Average#:~:text=CPU</a> load is the number,1%2C 5 and 15 minutes.)</p>
<p><a target="_blank" rel="noopener" href="https://man7.org/linux/man-pages/man1/top.1.html">top(1) - Linux manual page (man7.org)</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cs.unca.edu/brock/classes/Spring2013/csci331/notes/paper-1130.pdf">paper-1130.pdf (unca.edu)</a></p>

    </div>

    
    
    
        <div class="reward-container">
  <div></div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    Donate
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechatpay.png" alt="Ming WeChat Pay">
        <p>WeChat Pay</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="/images/alipay.jpg" alt="Ming Alipay">
        <p>Alipay</p>
      </div>

  </div>
</div>


      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/04/26/Function-Prolog/" rel="prev" title="Function Prolog">
      <i class="fa fa-chevron-left"></i> Function Prolog
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/05/09/sort-Search/" rel="next" title="sort.Search">
      sort.Search <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#load-average"><span class="nav-number">1.</span> <span class="nav-text">load average</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TASK-and-CPU-States"><span class="nav-number">2.</span> <span class="nav-text">TASK and CPU States</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hi"><span class="nav-number">3.</span> <span class="nav-text">hi</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#si"><span class="nav-number">4.</span> <span class="nav-text">si</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MEMORY-Usage"><span class="nav-number">5.</span> <span class="nav-text">MEMORY Usage</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CPU"><span class="nav-number">6.</span> <span class="nav-text">%CPU</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#reference"><span class="nav-number">7.</span> <span class="nav-text">reference</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Ming"
      src="/images/arina.jpg">
  <p class="site-author-name" itemprop="name">Ming</p>
  <div class="site-description" itemprop="description">Come on, check me out!</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">393</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">30</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">28</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/carpediemtal" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;carpediemtal" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:liujm2000@qq.com" title="E-Mail → mailto:liujm2000@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="QQ:674602921" title="QQ → QQ:674602921" rel="noopener" target="_blank"><i class="fab fa-qq fa-fw"></i>QQ</a>
      </span>
      <span class="links-of-author-item">
        <a href="/APTX158675" title="Wechat → APTX158675"><i class="fab fa-weixin fa-fw"></i>Wechat</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://www.treasurew.com/" title="http:&#x2F;&#x2F;www.treasurew.com&#x2F;" rel="noopener" target="_blank">treasurew</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ming</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  
  <script color='#4FC08D' opacity='0.5' zIndex='-1' count='' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
